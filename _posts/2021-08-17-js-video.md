---
layout: post
title: "js动态更改video src 不能播放的问题"
description: ""
category: "javascript"
tags: ["video","js"]
---
{% include JB/setup %}


### 先看js

```javascript
$(function () { $('#myModal').on('show.bs.modal', function (e) {
      var myVideo=document.getElementById("videoModal1");
      var videoUrl=$(e.relatedTarget).data("videourl");
      
      var source = document.createElement("source");
      source.id="video_path";
      source.type="video/mp4";
      source.src=videoUrl;
      myVideo.appendChild(source);

      myVideo.play();
      })
    });
```
### 问题
上面代码想实现动态改变video的source url播放不同视频，但是实际情况总是播放第一个打开的视频， 后面source url change 不起作用。

### 解决
只改变source的url还不够，还要同时改变video的url。只需加上一行代码

```javascript
$(function () { $('#myModal').on('show.bs.modal', function (e) {
      var myVideo=document.getElementById("videoModal1");
      var videoUrl=$(e.relatedTarget).data("videourl");
      
      myVideo.src=videoUrl;
      
      var source = document.createElement("source");
      source.id="video_path";
      source.type="video/mp4";
      source.src=videoUrl;
      myVideo.appendChild(source);

      myVideo.play();
      })
    });
```




